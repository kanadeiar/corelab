@page "/forms/details/{id:int}"

<h4 class="bg-info text-center p-2">Детали (WebAssembly)</h4>

<div>
    <label>Id</label>
    <input class="form-control" value="@PersonData.Id" disabled />
</div>
<div>
    <label>Фамилия</label>
    <input class="form-control" value="@PersonData.SurName" disabled/>
</div>
<div>
    <label>Имя</label>
    <input class="form-control" value="@PersonData.FirstName" />
</div>
<div>
    <label>Отдел</label>
    <input class="form-control" value="@PersonData.Department?.Name" />
</div>
<div>
    <label>Локация</label>
    <input class="form-control" value="@($"{PersonData.Location?.State}, {PersonData.Location?.City}")" />
</div>
<div class="text-center">
    <NavLink class="btn btn-info" href="@EditUrl">Редактирование</NavLink>
    <NavLink class="btn btn-secondary" href="forms">Назад</NavLink>
</div>

@code {
    [Inject]
    public NavigationManager NavManager { get; set; }
    [Inject]
    public HttpClient Http { get; set; }
    [Parameter]
    public int Id { get; set; }
    public Person PersonData { get; set; } = new Person();
    protected async override Task OnParametersSetAsync()
    {
        if (Http is { })
        {
            PersonData = await Http.GetFromJsonAsync<Person>($"/api/data/{Id}") ?? new ();
        }
    }
    public string EditUrl => $"forms/edit/{Id}";
}
